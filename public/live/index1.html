<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8">
   <title>直播页面</title>
</head>
<body>
    <link rel="stylesheet" type="text/css" href="style.css">
   <script src="flv.min.js"></script>

   <div class="nav">
        <ul class="navlist">
            <li><a style="border: 0px 20px;" href="../index.html"><img src="../pic/logo.png" alt="媒体部会徽" height="60px"></a></li>
            <li><a class="al" href="../index.html"><b>直播选择首页</b></a></li>
            <li><a class="al" href="../suggest.html">问题反馈</a></li>
            <li></li>
            <p style="float: left;height: 40px;line-height: 60px;text-align: center;color: rgb(161, 65, 39);">如有问题请反馈2班李昊哲、1班王颢然</p>
        </ul>
    </div>
    
    <!-- <iframe src="../head.html" class="head" frameborder="0"></iframe> -->
    <br><br><br>
   <h1 style="text-align: center;">朝外2022级学生会直播平台</h1>
   <br>
   <center>
    <div id="but" method="POST">
        <form>请输入推流码: <input id="code" type="text"></form>
        <button class="button" id="button" onclick="playflv()"><b>观看直播</b></button>
    </div>
   </center>
   <br>
   <video id="videoElement" style="display: block; margin: auto;" width="60%" controls></video>
   <script>
    function playflv(){
        document.getElementById('but').style.visibility='hidden';
        var code=document.getElementById('code').value;
        console.log(code);
        if (flvjs.isSupported()) {
           var videoElement = document.getElementById('videoElement');
           var flvPlayer = flvjs.createPlayer({
               type: 'flv',
               url: `http://cyxsh.top:8001/live/${code}.flv`
           });
           flvPlayer.attachMediaElement(videoElement);
           flvPlayer.load();
           flvPlayer.play();
       }
    }  
   </script>
   <iframe src="message.html" frameborder="0" class="message"></iframe>
</body>
</html>